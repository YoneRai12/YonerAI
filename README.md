# ORA Discord Bot (Universal Memory Ecosystem)

**ORA** は、高度な視覚・聴覚・思考能力を持つ次世代のDiscord AIアシスタントです。
あなたのPC上で動作し、画面認識（Vision）、音声対話（Voice）、そしてシステム制御を行うことができます。

## ✨ 主な機能

### 1. 🧠 True Vision (視覚機能)
*   **画像認識**: 画像を貼り付けて「これ解いて」「これは何？」と聞くと、AIが画像を直接見て回答します。
    *   Vision対応モデル (LLaVA, Qwen-VLなど) を推奨。
    *   テキスト専用モデルの場合でも、内蔵OCR (Tesseract) で文字を読み取ります。
*   **返信対応**: 画像が添付されたメッセージに**返信**する形でも、画像を認識できます。

### 2. 🗣️ Neural Voice (音声機能)
*   **VC自動応答**: 「@ORA 来て」でボイスチャンネルに参加し、チャットを読み上げたり、会話したりします。
*   **VOICEVOX連携**: 高品質な音声合成エンジン (VoiceVox) を使用。
*   **安定接続**: 自動再接続と最適化された音声パケット送信により、長時間の接続も安定。

### 3. 🖥️ Desktop Control (システム制御)
*   **PC操作**: 管理者権限を持つユーザーは、DiscordからPCの情報を取得したり、音量を操作したりできます。
*   **GPUモニタリング**: `get_system_stats` コマンドで、VRAM使用量やGPU負荷を確認可能。

---

## 🛠️ セットアップ手順 (重要)

このBotを動作させるには、以下の手順に従ってください。

### 1. 必須環境
*   Windows 10/11
*   Python 3.11 以上
*   [VoiceVox](https://voicevox.hiroshiba.jp/) (起動してバックグラウンドで動かしておく必要があります)
*   [LM Studio](https://lmstudio.ai/) (ローカルLLMサーバーとして使用)

### 2. インストール

プロジェクトのルートフォルダで、以下のコマンドを実行して依存ライブラリをインストールします。

```bash
pip install -r requirements.txt
```

### 3. ⚠️ 手動導入が必要なファイル (Critical)

Botが音声通話を行うために、以下のファイルが**必ず**必要です。
ライセンスの都合上、自動では同梱されないため、手動でダウンロードして配置してください。

1.  **`libopus-0.x64.dll`** をWebからダウンロードする。
    *   検索ワード: `libopus-0.x64.dll download`
    *   GitHubの `discord-opus` リポジトリなどから入手可能です。
2.  ダウンロードしたファイルを、`start_all.bat` と同じフォルダ（プロジェクトのルート）に置く。

**これがないと、VC接続時にタイムアウトして切断されます。**

### 4. 起動方法

```bash
start_all.bat
```
このスクリプトを実行すると、Bot、Web API、フロントエンドUI (ある場合) が一括で起動します。

---

## 🎮 基本的な使い方

*   **VCに参加させる**: ボイスチャンネルに入った状態で、`@ORA 来て` (または `/join_voice_channel`)
*   **画像を解かせる**: 画像を添付して `これ解いて`
*   **システム情報の確認**: (Adminのみ) `PCの調子どう？` -> CPU/GPU使用率を表示

## 📝 更新履歴
*   **v3.1**: Vision機能の強化（Base64直接送信）、Opusライブラリチェック機能の追加、VC接続安定化。
