:root{
  --container: min(96vw, 2100px);
  --sidebarW: 360px;
  --gap: 16px;
  --pad: 18px;
  --r: 18px;

  --bg0:#05070b;
  --bg1:#090c14;
  --panel:rgba(16, 20, 30, .74);
  --panel2:rgba(16, 20, 30, .58);
  --text:rgba(255,255,255,.92);
  --muted:rgba(255,255,255,.62);
  --line:rgba(255,255,255,.10);
  --line2:rgba(255,255,255,.06);

  --accent:#60a5fa;
  --accent2:#34d399;
  --ok:#34d399;
  --bad:#fb7185;
  --warn:#fbbf24;

  --mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
  --sans:"SF Pro Display","SF Pro Text","Avenir Next","Segoe UI Variable","Segoe UI","Noto Sans JP",system-ui,-apple-system,sans-serif;
  --shadow:0 30px 120px rgba(0,0,0,.55);
  --shadow2:0 14px 60px rgba(0,0,0,.38);
  --fontSize: clamp(13px, 0.86vw, 15px);
}

:root.isWide{
  --container: min(96vw, 2400px);
  --sidebarW: 420px;
  --gap: 18px;
  --pad: 20px;
}

:root.is4k{
  --container: min(96vw, 3000px);
  --sidebarW: 520px;
  --gap: 22px;
  --pad: 26px;
  --r: 22px;
  --fontSize: 16px;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:var(--sans);
  font-size:var(--fontSize);
  color:var(--text);
  min-height:100vh;
  background:
    radial-gradient(1200px 900px at 18% 10%, rgba(96, 165, 250, .20), transparent 60%),
    radial-gradient(1100px 840px at 92% 18%, rgba(52, 211, 153, .14), transparent 62%),
    radial-gradient(1200px 900px at 55% 120%, rgba(255, 255, 255, .06), transparent 60%),
    linear-gradient(180deg, var(--bg0), var(--bg1));
}
body:before{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  background:
    radial-gradient(1200px 900px at 40% 10%, rgba(255,255,255,.06), transparent 65%),
    repeating-linear-gradient(90deg, rgba(255,255,255,.028) 0px, rgba(255,255,255,.028) 1px, transparent 1px, transparent 7px);
  opacity:.95;
  mix-blend-mode:soft-light;
}
a{color:var(--accent);text-decoration:none}
a:hover{text-decoration:underline}

/* Top bar */
.topbar{
  position:sticky;top:14px;z-index:30;
  max-width:var(--container);
  margin:14px auto 0;
  padding:12px 14px;
  display:grid;grid-template-columns:auto 1fr auto;gap:12px;align-items:center;
  border:1px solid var(--line);
  border-radius:999px;
  background:linear-gradient(180deg, rgba(16, 20, 30, .78), rgba(16, 20, 30, .60));
  box-shadow:var(--shadow2);
  backdrop-filter:blur(18px);
}
.brand{display:grid;gap:2px}
.brand h1{margin:0;font-size:15px;letter-spacing:.2px;font-weight:900}
.brand p{margin:0;font-size:12px;color:var(--muted);line-height:1.35}
.topActions{display:inline-flex;gap:10px;align-items:center}

button{
  border:1px solid var(--line);
  border-radius:14px;
  padding:10px 12px;
  background:rgba(255,255,255,.04);
  color:var(--text);
  cursor:pointer;
  font-weight:750;
  font-size:12px;
}
button:hover{
  border-color:rgba(96, 165, 250, .35);
  box-shadow:0 12px 32px rgba(0,0,0,.24);
}
button:active{transform:translateY(1px)}
button.secondary{background:rgba(255,255,255,.03)}
button.danger{background:rgba(251,113,133,.08);border-color:rgba(251,113,133,.20)}
button:disabled{opacity:.55;cursor:not-allowed}
.iconBtn{padding:10px;border-radius:14px;background:rgba(255,255,255,.04)}

/* Layout */
.app{
  max-width:var(--container);
  margin:0 auto;
  padding:var(--pad);
  display:grid;
  grid-template-columns:var(--sidebarW) 1fr;
  gap:var(--gap);
  align-items:start;
}

.sidebar{
  position:sticky;
  top:92px;
  height:calc(100vh - 112px);
  overflow:auto;
  border:1px solid var(--line);
  border-radius:calc(var(--r) + 6px);
  background:linear-gradient(180deg, rgba(16, 20, 30, .76), rgba(16, 20, 30, .58));
  box-shadow:var(--shadow);
  backdrop-filter:blur(18px);
  padding:14px;
}
.sidebarDrawer{
  display:block;
  position:relative;
  top:0;
  height:100vh;
  border-radius:0;
  border-left:0;
  border-top:0;
  border-bottom:0;
}

.navTitle{
  margin:8px 8px 10px;
  font-size:11px;
  letter-spacing:.18em;
  text-transform:uppercase;
  color:rgba(255,255,255,.52);
}
.nav{display:grid;gap:8px}
.navItem{
  width:100%;
  text-align:left;
  display:grid;
  grid-template-columns:1fr auto;
  align-items:center;
  gap:10px;
  border:1px solid var(--line2);
  border-radius:calc(var(--r) + 2px);
  padding:12px;
  background:rgba(255,255,255,.03);
  color:var(--text);
  font-weight:850;
}
.navLabel{display:flex;gap:10px;align-items:center}
.navIcon{
  width:10px;height:10px;border-radius:4px;
  background:linear-gradient(180deg, rgba(96,165,250,.95), rgba(52,211,153,.65));
  box-shadow:0 12px 26px rgba(0,0,0,.35);
  opacity:.82;
}
.navItem.active .navIcon{opacity:1}
.navItem:hover{border-color:rgba(96,165,250,.22);transform:translateY(-1px)}
.navItem .sub{margin-top:3px;font-size:11px;color:rgba(255,255,255,.56);font-weight:650}
.navItem.active{
  border-color:rgba(96,165,250,.30);
  box-shadow:0 0 0 2px rgba(96,165,250,.10) inset;
  background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
}
.count{
  font-family:var(--mono);
  font-size:11px;
  color:rgba(255,255,255,.62);
  padding:4px 8px;
  border:1px solid var(--line2);
  border-radius:999px;
  background:rgba(255,255,255,.02);
}

.sideSection{
  margin-top:12px;
  padding-top:12px;
  border-top:1px solid var(--line);
  display:grid;
  gap:10px;
}
.sideGrid{display:grid;gap:8px}
.sideButtons{display:flex;gap:8px;flex-wrap:wrap}
.sideButtons button{flex:1}
.prefRow{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding:8px 10px;
  border:1px solid var(--line2);
  border-radius:calc(var(--r) + 2px);
  background:rgba(255,255,255,.02);
}
.prefLabel{font-weight:850;color:rgba(255,255,255,.74);font-size:12px}

.content{
  border:1px solid var(--line);
  border-radius:calc(var(--r) + 10px);
  background:linear-gradient(180deg, rgba(16, 20, 30, .78), rgba(16, 20, 30, .58));
  box-shadow:var(--shadow);
  backdrop-filter:blur(18px);
  padding:calc(var(--pad) * 0.85);
  min-height:60vh;
}

.contentHeader{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:16px;
  flex-wrap:wrap;
  margin-bottom:12px;
}
.headLeft{display:grid;gap:6px}
.headRight{display:grid;gap:10px;justify-items:end}
.contentHeader h2{margin:0;font-size:20px;font-weight:950;letter-spacing:.2px}
.contentHeader p{margin:0;font-size:12px;color:var(--muted);line-height:1.45;max-width:72ch}

.card{
  border:1px solid var(--line2);
  border-radius:calc(var(--r) + 8px);
  background:rgba(255,255,255,.03);
  box-shadow:0 10px 28px rgba(0,0,0,.28);
  padding:14px;
}
.topCard{padding:12px 14px}
.filterRow{
  display:flex;
  gap:12px;
  align-items:flex-end;
  justify-content:space-between;
  flex-wrap:wrap;
}
.filterCol{min-width:min(520px,100%);flex:1}

.topPills{display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:flex-end}
.topRight{display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:flex-end}
.inlineLabel{margin:0;color:var(--muted);font-size:12px;font-weight:750}
.spacer{height:12px}

.panelBody{display:grid;gap:14px}

@media (prefers-reduced-motion: no-preference){
  .panelBody{animation:fadeUp .18s ease both}
  @keyframes fadeUp{from{opacity:.65;transform:translateY(7px)}to{opacity:1;transform:translateY(0)}}
}

label{display:block;font-size:12px;color:var(--muted);margin:10px 0 6px}
input,textarea,select{
  width:100%;
  padding:11px 12px;
  border-radius:calc(var(--r) + 6px);
  border:1px solid var(--line2);
  background:rgba(0,0,0,.22);
  color:var(--text);
  outline:none;
  font-family:var(--mono);
  font-size:12px;
}
input:focus,textarea:focus,select:focus{
  border-color:rgba(96,165,250,.42);
  box-shadow:0 0 0 4px rgba(96,165,250,.14);
}
textarea{min-height:92px;resize:vertical}
input[disabled],textarea[disabled]{opacity:.65}
.msg{margin-top:10px;font-size:12px;color:var(--muted);white-space:pre-wrap;line-height:1.45}
.pill{
  display:inline-flex;align-items:center;gap:6px;
  padding:4px 8px;border-radius:999px;
  font-size:11px;border:1px solid var(--line2);
  background:rgba(255,255,255,.02);
  color:rgba(255,255,255,.70);
  font-family:var(--mono);
}

/* Section cards (OpenAI-like) */
.sectionGrid{
  display:grid;
  gap:14px;
  grid-template-columns:1fr;
}
@media (min-width: 1200px){
  .sectionGrid{grid-template-columns:repeat(2, minmax(0,1fr))}
}
.sectionCard{
  border:1px solid var(--line2);
  border-radius:calc(var(--r) + 10px);
  background:linear-gradient(180deg, rgba(255,255,255,.035), rgba(255,255,255,.018));
  box-shadow:0 14px 50px rgba(0,0,0,.28);
  padding:14px;
}
.sectionHead{
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  gap:10px;
  margin-bottom:10px;
}
.sectionTitle{
  margin:0;
  font-size:13px;
  letter-spacing:.02em;
  font-weight:950;
}
.sectionHint{
  margin:0;
  font-size:11px;
  color:rgba(255,255,255,.55);
}
.fieldGrid{
  display:grid;
  gap:10px;
  grid-template-columns:1fr;
}
@media (min-width: 1400px){
  .fieldGrid{grid-template-columns:repeat(2, minmax(0,1fr))}
}

/* Field blocks (keep class name settingRow for existing JS filter/dirty tracking) */
.settingRow{
  border:1px solid var(--line2);
  border-radius:calc(var(--r) + 8px);
  background:rgba(0,0,0,.18);
  padding:12px;
  display:grid;
  gap:10px;
}
.settingRow.wide{grid-column:1/-1}
.settingChanged{
  border-color:rgba(96,165,250,.36);
  box-shadow:0 0 0 2px rgba(96,165,250,.12) inset;
}
.fieldKey{
  font-family:var(--mono);
  font-size:12px;
  color:rgba(96,165,250,.95);
}
.fieldDesc{
  margin-top:6px;
  font-size:12px;
  color:rgba(255,255,255,.60);
  white-space:pre-wrap;
  line-height:1.45;
}
:root.hideDesc .fieldDesc{display:none}
.settingMeta{
  margin-top:10px;
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  align-items:center;
}
.badge{
  display:inline-flex;align-items:center;gap:6px;
  border:1px solid var(--line2);
  background:rgba(255,255,255,.02);
  color:rgba(255,255,255,.62);
  border-radius:999px;
  padding:4px 8px;
  font-size:11px;
}
.badge.good{color:var(--ok)}
.badge.bad{color:var(--bad)}
.badge.warn{color:var(--warn)}

/* Switch */
.switchRow{display:grid;gap:10px}
.switchWrap{display:inline-flex;align-items:center;gap:10px;flex-wrap:wrap}
.switch{position:relative;width:46px;height:28px;display:inline-block}
.switch input{opacity:0;width:0;height:0}
.slider{
  position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;
  border-radius:999px;
  background:rgba(255,255,255,.08);
  border:1px solid var(--line2);
  transition:.15s ease;
}
.slider:before{
  content:"";
  position:absolute;
  height:22px;width:22px;
  left:3px;top:50%;
  transform:translateY(-50%);
  border-radius:999px;
  background:rgba(255,255,255,.92);
  box-shadow:0 12px 26px rgba(0,0,0,.42);
  transition:.15s ease;
}
.switch input:checked + .slider{
  background:rgba(96,165,250,.26);
  border-color:rgba(96,165,250,.34);
}
.switch input:checked + .slider:before{transform:translate(18px,-50%)}
.unsetBtn{
  padding:8px 10px;
  border-radius:999px;
  background:rgba(255,255,255,.02);
  border:1px solid var(--line2);
  color:rgba(255,255,255,.78);
  font-size:11px;
  font-weight:900;
  cursor:pointer;
}
.unsetBtn:hover{color:var(--text)}

/* Drawer */
.drawerMask{
  position:fixed;inset:0;
  background:rgba(0,0,0,.50);
  backdrop-filter:blur(10px);
  display:none;
  z-index:40;
}
.drawerMask.on{display:block}
.drawer{
  position:fixed;top:0;left:0;
  width:min(380px,92vw);
  height:100vh;
  transform:translateX(-102%);
  transition:.18s ease;
  z-index:50;
}
.drawer.on{transform:translateX(0%)}

/* Responsive */
@media(max-width:980px){.app{grid-template-columns:1fr}.sidebar{display:none}}
@media(min-width:981px){.menuBtn{display:none}}
