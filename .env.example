# ==========================================
# ORA Bot Configuration (EXAMPLE)
# ==========================================

# Discord Credentials
DISCORD_BOT_TOKEN=YOUR_DISCORD_BOT_TOKEN
DISCORD_APP_ID=YOUR_DISCORD_APP_ID
ORA_DEV_GUILD_ID=YOUR_DEV_GUILD_ID

# API Base URLs
ORA_API_BASE_URL=http://127.0.0.1:8001
ORA_CORE_API_URL=http://127.0.0.1:8001
PUBLIC_BASE_URL=http://127.0.0.1:3333

# LLM Configuration
LLM_BASE_URL=http://127.0.0.1:8008/v1
LLM_API_KEY=YOUR_LLM_API_KEY
LLM_MODEL=mistralai/ministral-3-14b-reasoning
ORA_LLM_PRIORITY=cloud

# Image Generation (Diffusers / ComfyUI)
SD_API_URL=http://127.0.0.1:8188

# Voice (VoiceVox)
VOICEVOX_API_URL=http://127.0.0.1:50021
VOICEVOX_SPEAKER_ID=1

# Search
SEARCH_ENGINE=google
SEARCH_API_KEY=YOUR_SEARCH_API_KEY

# Google Cloud (Optional)
GOOGLE_API_KEY=YOUR_GOOGLE_API_KEY
GOOGLE_CLIENT_ID=YOUR_GOOGLE_CLIENT_ID
GOOGLE_CLIENT_SECRET=YOUR_GOOGLE_CLIENT_SECRET
GOOGLE_REDIRECT_URI=http://127.0.0.1:8003/auth/discord

# Security & Privacy
LOG_LEVEL=INFO
PRIVACY_DEFAULT=private
ORA_BOT_DB=ora_bot.db
ADMIN_USER_ID=YOUR_ADMIN_USER_ID

# OpenAI (Alternative Brain)
OPENAI_API_KEY=YOUR_OPEN_AI_KEY

# IDs & Channels (Discord)
SUB_ADMIN_IDS=
VC_ADMIN_IDS=
LOG_CHANNEL_ID=
STARTUP_NOTIFY_CHANNEL_ID=
FEATURE_PROPOSAL_CHANNEL_ID=
CONFIG_UI_NOTIFY_ID=
ORA_WEB_NOTIFY_ID=
ORA_API_NOTIFY_ID=
WEB_CHAT_NOTIFY_ID=
CONFIG_PAGE_NOTIFY_ID=

# Webhooks
DISCORD_WEBHOOK_URL=

# Web UI Credentials
AUTH_STRATEGY=local
DISCORD_CLIENT_ID=
DISCORD_CLIENT_SECRET=
NEXTAUTH_SECRET=ora_super_secure_random_secret_key_2026

# Storage Configuration
ORA_DATA_ROOT=L:\

# Profile / Instance (M1: isolation)
# - ORA_PROFILE: separate private/shared state (DB/logs/memory/temp/secrets)
# - ORA_INSTANCE_ID: stable identifier per PC install (optional; auto-generated if missing)
ORA_PROFILE=private
ORA_INSTANCE_ID=
# Escape hatch for older layouts (use ORA_State/ORA_Logs directories directly)
ORA_LEGACY_DATA_LAYOUT=0

# Cloudflare Tunnel
CLOUDFLARE_TUNNEL_TOKEN=
TUNNEL_HOSTNAME=

# Startup safety (default OFF)
# Auto-open local web interfaces in your browser when the bot becomes ready.
ORA_AUTO_OPEN_LOCAL_INTERFACES=0
# Auto-start Cloudflare tunnels on startup (external exposure). Recommended OFF.
ORA_AUTO_START_TUNNELS=0
# Allow quick tunnels (trycloudflare) when no named tunnel token is present.
# Keep OFF unless you explicitly want quick tunnels.
ORA_TUNNELS_ALLOW_QUICK=0

# Privacy / Security (Proxy)
BROWSER_PROXY=socks5://127.0.0.1:40000

# Remote Browser/API Security
BROWSER_REMOTE_TOKEN=
REQUIRE_BROWSER_TOKEN=0
ORA_WEB_API_TOKEN=
ORA_REQUIRE_WEB_API_TOKEN=0
ADMIN_DASHBOARD_TOKEN=
ALLOW_INSECURE_ADMIN_DASHBOARD=0

# CORS (comma-separated)
ORA_CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000,http://localhost:3333,http://127.0.0.1:3333,http://localhost:8000,http://127.0.0.1:8000

# Agent Trace (debug timeline)
ORA_TRACE_ENABLED=1
ORA_TRACE_LOG=logs/agent_trace.jsonl

# Memory: attachment captioning for long-term memory (costly if enabled).
# - off: record only metadata
# - auto: caption only when main model is NOT vision-native
# - on: always caption images/videos (extra API calls)
ORA_MEMORY_MEDIA_CAPTION=off

# Access control: expand tool permissions for non-owner users.
# Default behavior:
# - owner (ADMIN_USER_ID): all tools
# - sub-admin (SUB_ADMIN_IDS): public tools + ORA_SUBADMIN_TOOLS
# - others: ORA_PUBLIC_TOOLS (plus built-in safe defaults)
ORA_PUBLIC_TOOLS=weather,read_web_page,read_chat_history,get_role_list
ORA_SUBADMIN_TOOLS=

# Approvals (M1.5)
# - HIGH approvals: default ~120s
# - CRITICAL approvals: default ~30s + optional code challenge
ORA_APPROVAL_TTL_HIGH_SEC=120
ORA_APPROVAL_TTL_CRITICAL_SEC=30
# Guest anti-spam: max approvals created per time window (set 0 to disable)
ORA_APPROVAL_RATE_LIMIT_PER_MIN=6
ORA_APPROVAL_RATE_LIMIT_WINDOW_SEC=60
# Shared profile policy (M3)
# - Guest allowlist for shared profile. If set, it replaces defaults (recommended).
# - CRITICAL tools are blocked for guests by default unless explicitly allowed.
ORA_SHARED_GUEST_ALLOWED_TOOLS=
ORA_SHARED_ALLOW_CRITICAL=0
# Optional: rate limit guest tool execution (LOW spam). 0 disables.
ORA_GUEST_TOOL_RATE_LIMIT_PER_MIN=0
ORA_GUEST_TOOL_RATE_LIMIT_WINDOW_SEC=60

# Relay (M2 MVP)
ORA_RELAY_HOST=127.0.0.1
ORA_RELAY_PORT=9010
# How to expose Relay publicly (domain-less option is Cloudflare Quick Tunnel).
# none | cloudflared_quick | cloudflared_named
ORA_RELAY_EXPOSE_MODE=none
ORA_CLOUDFLARED_BIN=
ORA_RELAY_PUBLIC_URL_FILE=.relay_public_url.txt
ORA_RELAY_CLOUDFLARED_LOG=logs/cf_relay.log

# Relay base URL for Node connector / clients:
# - ws://127.0.0.1:9010 (local)
# - wss://<random>.trycloudflare.com (Quick Tunnel)
# - auto (read ORA_RELAY_URL_FILE; useful when Relay + Node connector run on the same machine)
ORA_RELAY_URL=ws://127.0.0.1:9010
ORA_RELAY_URL_FILE=.relay_public_url.txt
ORA_RELAY_URL_WAIT_SEC=30
ORA_RELAY_SESSION_TTL_SEC=3600
ORA_RELAY_PAIR_TTL_SEC=120
ORA_RELAY_MAX_MSG_BYTES=1048576
ORA_RELAY_MAX_HTTP_BODY_BYTES=262144
ORA_RELAY_MAX_PENDING=64
ORA_RELAY_CLIENT_TIMEOUT_SEC=35
ORA_RELAY_PAIR_RATE_LIMIT_PER_MIN=30
# Node-side connector
ORA_RELAY_NODE_ID=
ORA_RELAY_PAIR_CODE=
ORA_NODE_API_BASE_URL=http://127.0.0.1:8000

# Agent Swarm (high-complexity orchestration)
ORA_SWARM_ENABLED=1
ORA_SWARM_MAX_TASKS=3
ORA_SWARM_MAX_WORKERS=3
ORA_SWARM_MAX_RETRIES=1
ORA_SWARM_SUBTASK_TIMEOUT_SEC=90
ORA_SWARM_MERGE_MODEL=gpt-5-mini

# Scheduler (Owner-only automation)
# Disabled by default for safety.
ORA_SCHEDULER_ENABLED=0
ORA_SCHEDULER_TICK_SEC=15
ORA_SCHEDULER_MAX_CONCURRENCY=1

# Dev/Test convenience:
# Allow running smoke tests without setting real secrets (CI/pytest auto-enable this too).
ORA_ALLOW_MISSING_SECRETS=0

# Router safety: cap number of tools exposed per request (prevents over-selection).
ORA_ROUTER_MAX_TOOLS=10

# MCP (Model Context Protocol) tool servers
# Disabled by default. When enabled, ORA connects to configured MCP servers and exposes their tools
# as ORA tools named like `mcp__<server>__<tool>`.
ORA_MCP_ENABLED=0
# Optional hardening:
# Deny tool names containing these substrings unless explicitly allowed.
ORA_MCP_DENY_TOOL_PATTERNS=delete,remove,rm,wipe,format,reset,push,publish,deploy,shell,exec,run
# Allow dangerous MCP tools (NOT recommended).
ORA_MCP_ALLOW_DANGEROUS=0
# JSON array. Example:
# ORA_MCP_SERVERS_JSON=[{"name":"codex","command":"codex mcp-server","allowed_tools":["read_file","search"]}]
ORA_MCP_SERVERS_JSON=

# Approvals (risk-based gate) - recommended ON for everyone (including owner).
ORA_APPROVAL_TIMEOUT_SEC=120
ORA_APPROVAL_CRITICAL_CODE_LEN=6

# Audit log retention (SQLite)
ORA_AUDIT_RETENTION_DAYS=14
ORA_AUDIT_MAX_ROWS=50000
ORA_CHAT_EVENTS_MAX_ROWS=50000
ORA_AUDIT_MAX_ARGS_CHARS=5000
ORA_AUDIT_MAX_RESULT_CHARS=2000

# Voice restore (optional)
# Persist currently connected VC channels and rejoin after restart (within TTL).
ORA_VOICE_RESTORE_ON_STARTUP=0
ORA_VOICE_RESTORE_TTL_SEC=300
# Periodically snapshot VC state so unexpected crashes can be recovered too.
ORA_VOICE_RESTORE_SNAPSHOT=0
ORA_VOICE_RESTORE_SNAPSHOT_INTERVAL_SEC=20

# Remotion (video creation)
# Used by the `remotion_create_video` skill (owner-only).
# 1) Install deps:
#    cd tools/remotion && npm ci
# 2) Use:
#    remotion_create_video(preset="title_card", title="...", subtitle="...", resolution="1080p", output="mp4")
ORA_REMOTION_PROJECT_DIR=tools/remotion
ORA_REMOTION_ENTRY=src/index.ts
ORA_REMOTION_RENDER_TIMEOUT_SEC=900
